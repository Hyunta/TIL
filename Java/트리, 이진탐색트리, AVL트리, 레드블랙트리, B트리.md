# 트리

- 각 노드들의 집합
- 엣지로 연결되어있음



# 이진 탐색트리

- 이진 트리는 부모의 자녀가 최대 2개인 경우
- 부모를 기준으로 작은 값은 왼쪽, 큰 값은 오른쪽에 연결하는 트리



## 시간복잡도

|        | Best | Avg     | Worst |
| ------ | ---- | ------- | ----- |
| insert | O(1) | O(logN) | O(n)  |
| delete | O(1) | O(logN) | O(n)  |
| search | O(1) | O(logN) | O(n)  |



## 장단점

- 삽입과 삭제가 용이하다



# AVL 트리

- 균형 유지하는 밸런스 트리

- balance factor를 통해 균형 유지

- 임의의 노드x에 대해서 BF(x) = h(lSubtree(x)) - h(rSubtree(x))

  왼쪽 하위트리의 높이 우측 하위트리의 높이의 차이가 1보다 작도록 한다.



## 작동 원리

- 트리에 삽입 혹은 삭제 후 균형을 유지하는 과정을 진행한다.
- 만약 높이 차이가 2 이상 발생하면 균형을 조정한다.
- 삽입 삭제를 위해서 루트 노드까지 올라가면서 확인하고 균형을 재조정해준다.



## 시간복잡도

|        | Best | Avg     | Worst   |
| ------ | ---- | ------- | ------- |
| insert | O(1) | O(logN) | O(logn) |
| delete | O(1) | O(logN) | O(logn) |
| search | O(1) | O(logN) | O(logn) |



## 단점

- 엄격하게 균형을 유지하기 때문에 트리 구조를 재조정할 때 시간이 많이 소모된다.
  - 이를 해결하는 것이 Red Black Tree



# RedBlackTree

- BST의 한 종류
- 스스로 균형잡는 트리
- worst case 단점 개선
  - 모든 노드는 red or black
  - 루트 노드는 black

- nil 노드 : 자녀가 없을 때 자녀를 nil 노드로 표기 -> 일반 노드와 동등하게 취급
- RB트리에서 모든 리프 노드는 nil 노드
- 모든 nilNode는 black
- red의 자녀들은 black
- red는 연속적으로 존재할 수 없다.
- 모든 경로들에서 black 수는 같다.
- black height는 임의의 노드에서 nil 노드까지 내려가는 경로에서의 black 수

- 부모와 두 자녀의 색을 바꿔줘도 여전히 blackHeight는 같다.



1. 모든 노드는 red 혹은 black
2. 루트 노드는 black
3. 모든 nilNode는 black
4. 노드가 red라면 자녀들은 black
5. 임의의 노드에서 자손 nil 노드들까지 가는 경로들에 있는 black 수는 같다.



삽입 / 삭제 시 주로 4번과 5번 속성을 위반한다. 이를 해결하기 위해 구조를 바꾸다 보면 자연스럽게 트리의 균형이 잡힌다.

4번: 노드가 red라면 자녀들은 black

5번: 임의의 노드에서 자손 nill 노드들까지 가는 경로들의 black 수는 같다



## 삽입

1. BST와 동일하게 삽입
2. RB 트리 위반 여부 확인
3. RB 트리 위반시 재조정
4. RB 트리 속성을 다시 만족



- 삽입은 항상 red이다.

  이유: 삽입 후에도 5번 속성을 만족하기 위해서








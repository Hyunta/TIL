AmountDiscountPolicy

인터페이스는 객체가 이해할 수 있는 메시지의 목록을 정의한다는 것을 기억하라.

### 상속과 합성

인터페이스는 상속인데, 인터페이스를 분리하는 것은 권장하는 것 같으면서 왜 상속하지 말라고 할까?

블랙잭에서 Dealer와 Player를 상속해서 구현하는 것이 아니라 Role 을 갖고 Role에서 호출하도록 구현



# 1. 영화 예매 시스템

- 영화
- 상영
- 할인 정책
  - 금액 할인 정책
  - 비율 할인 정책

# 2 객체지향 프로그래밍을 향해

클래스와 객체는 다르다.

객체지향은 객체를 지향하는 것이다.

1. 어떤 클래스가 필요한지를 고민하기 전에 어떤 객체들이 필요한지 고민하라. 어떤 객체들이 어떤 상태와 행동을 가지는지를 먼저 결정하자.
2. 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐야 한다.

문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야를 도메인이라고 한다.

클래스의 내부와 외부를 구분해야 하는 이유는 무엇일까? 그 이유는 경계의 명확성이 객체의 자율성을 보장하기 때문이다.

객체는

1. 상태와 행동을 함께 가지는 복합적인 존재다.
2. 객체가 스스로 판단하고 행동하는 자율적인 존재다.

데이터와 기능을 객체 내부로 함께 묶는 것을 캡슐화라 한다. feat 접근제어, 접근 수정자

외부에서 접근 가능한 인터페이스와 오직 내부에서만 접근 가능한 부분을 구현(Implementation) 이라고 한다.

프로그래머의 역할은 클래스 작성자와 클라이언트 프로그래머로 구분할 수 있다.

클래스 작성자 - 새로운 데이터 타입을 프로그램에 추가

클라이언트 프로그래머 - 클래스 작성자가 추가한 데이터 타입을 사용한다.

상영, 영화, 예약의 인스턴스들은 서로의 메서드를 호출하며 상호작용한다. 이 상호작용을 협력이라고 부른다.

객체는 다른객체의 인터페이스에 공개된 행동을 수행하도록 요청할 수 있다. 요청받은 객체는 자율적인 방법에 따라 요청을 처리한 후 응답한다.

객체간의 메세지를 주고받고 처리하는 방법을 메서드라 한다.



# 3. 할인 요금 구하기

상속과 다형성 그리고 추상화를 이용해서 어떤 할인 정책을 사용하는지 Movie라는 객체는 모른다. 외부에서 주입받을 뿐이다.

DiscountPolicy 와 DiscountCondition을 통해 할인받을 정책과 조건을 구현한다.

# 4. 상속성과 다형성

무조건 유연한 설계도, 무조건 읽기 쉬운 코드도 정답이 아니다. 이것이 객체지향 설계가 어려우면서도 매력적인 이유다.

상속이 가치 있는 이유는 부모 클래스가 제공하는 모든 인터페이스를 자식 클래스가 물려받을 수 있기 때문이다.

동일한 메시지를 전송하지만 실제로 어떤 메서드가 실행될 것인지는 메시지를 수신하는 객체의 클래스가 무엇이냐에 따라 달라진다. 이를 다형성이라고 부른다.

**계층형 아키텍처** 

- 웹, 도메인, 영속성 계층으로 구성된 전통적인 웹 애플리케이션 구조

저자가 생각하는 문제점은

1. 코드에 나쁜 습관들이 스며들기 쉽게 만들고
2. 시간이 지날수록 소프트웨어를 점점 더 변경하기 어렵게 만드는 수많은 허점들을 노출한다.



### 계층형 아키텍처는 데이터베이스 주도 설계를 유도한다.

< 웹  &rarr;  도메인 &rarr;  영속성  >

모든 것이 영속성 계층을 토대로 만들어지므로 데이터베이스를 의존하게 된다.

우리는 상태가 아니라 행동을 중심으로 모델링한다. 행동이 상태를 바꾸는 주체이기 때문에 행동이 비지니스를 이끌어간다.

유스케이스를 만들 때, 데이터 베이스의 구조를 먼저 생각하고, 이를 토대로 도메인 로직을 구현했을텐데 비지니스 관점에서는 도메인 로직을 먼저 만들어야한다.

ORM 프레임워크를 계층형 아키텍처와 결합하면, 비지니스 규칙을 영속성 관점과 섞고 싶은 유혹을 쉽게 받는다.



### 지름길을 택하기 쉬워진다.

전통적인 계층형 아키텍처에서 전체적으로 적용되는 유일한 규칙은, 특정한 계층에서는 같은 계층에 있는 컴포넌트나 아래에 있는 계층에서만 접근 가능하다는 것이다.

만약 상위 계층에 위치한 컴포넌트에 접근해야 한다면 간단하게, 계층을 아래로 내려버리면 접근 가능해진다. 이런 느슨한 규칙은 결국 깨진 유리창문 이론에 의해 심리적 부담감을 낮춘다.



### 동시 작업이 어려워진다.

영속성 계층, 도메인 계층, 웹 계층을 순차적으로 개발해야하기 때문에 여러명이서 같은 기능을 개발할 수 없다.



## 결론

올바르게 구축하고, 몇 가지 추가적인 규칙들을 적용하면, 계층형 아키텍처는 유지보수하기 수월해진다. 하지만 느슨한 규칙때문에 시간이 지날수록 품질이 저하되고 유지보수하기가 어려워지기 쉽다. 따라서 계층형 아키텍처의 함정을 염두에 두고 개발하자.






# 스프링 AOP 개념

핵심 기능 - 비지니스 로직  ex) 주문 로직

부가 기능 - 핵심 기능을 보조하기 위한 기능 ex) 로그 추적 로직, 트랜잭션 기능

보통 부가 기능은 여러 클래스에 걸쳐서 함께 사용된다. 부가 기능은 횡단 관심사가 된다.

**부가 기능 적용 문제를 정리하면 다음과 같다.**부가 기능을 적용할 때 아주 많은 반복이 필요하다. 부가 기능이 여러 곳에 퍼져서 중복 코드를 만들어낸다. 부가 기능을 변경할 때 중복 때문에 많은 수정이 필요하다. 부가 기능의 적용 대상을 변경할 때 많은 수정이 필요하다.

소프트웨어 개발에서 변경 지점은 하나가 될 수 있도록 잘 모듈화 되어야 한다. 그런데 부가 기능처럼 특정 로직을 애플리케이션 전반에 적용하는 문제는 일반적인 OOP 방식으로는 해결이 어렵다.

부가 기능과 핵심 기능을 분리하고 한 곳에서 관리하도록 만들었다. 부가 기능과 어디에 적용할지 선택하는 기능을 합쳐서 하나의 모듈로 만들었는데 그것이 바로 Aspect다.

적용 방법이 크게 3가지가 존재한다.

1. 컴파일 시점
2. 클래스 로딩 시점
3. 런타임 시점

3번은 프록시다.

joinPoint를 사용해서 다양한 위치에 적용할 수 있다.

따라서 생성자나 static 메서드, 필드값 접근에는 프록시 개념이 적용될 수 없다.

스프링 빈에만 프록시가 동작한다.

스프링은 AspectJ의 문법을 차용하고 프록시 방식의 AOP를 적용한다. AspectJ를 직접 사용하는 것이 아니다. AsepectJ 자체가 너무 방대하므로, 스프링이 제공하는 AspectJ만 알아도 충분하다.
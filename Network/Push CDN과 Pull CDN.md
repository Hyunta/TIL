# Content Delivery Network

![img](https://github.com/donnemartin/system-design-primer/raw/master/images/h9TAuGI.jpg)



글로벌하게 분산된 프록시 서버다 클라이언트와 가까운 유저에게 컨텐츠를 제공하는 목적을 갖고 있다. 보편적으로 HTML, CSS, JS, 사진, 비디오 같은 정적 파일들을 CDN으로 전달한다. AWS의 CloudFront 같은 기술은 동적 컨텐츠도 지원하지만 DNS가 클라이언트에게 어떤 서버에 연결해야할지 알려줄 것이다.

CDN이 성능을 향상 시키는 원인은 두가지로 볼 수 있다.

- 사용자가 본인의 위치와 가까운 데이터 센터에서 컨텐츠를 받는다.
- 서버는 CDN이 수행하는 요청에 대해 처리하지 않아도 된다.



## Push CDN

Push CDN은 서버에 변경이 생길때마다 새로운 컨텐츠를 받는다. 서버가 모든 책임을 가지고 컨텐츠를 제공해야하고, CDN에 업로드하고, URL을 다시 써줘야한다. 컨텐츠가 언제 만료될지 알 수 있다. 새롭거나 수정이 컨텐츠만 업로드된다.

작은 규모의 트래픽이 발생하거나 업데이트가 자주 발생하지 않는 경우에는 Push CDN이 적절하다.



## Pull CDN

Pull CDN은 사용자가 처음으로 컨텐츠를 요청할 때 서버에서 컨텐츠를 받아온다. 컨텐츠는 서버에 남겨두고 URL이 CDN을 바라볼 수 있도록 다시 쓴다. CDN이 캐시될 때까지 시간이 걸린다.

TTL은 컨텐츠가 캐싱되는 시간을 결정한다. 스토리지 사용량을 줄이지만 만약 만료되는 파일이 많고 수정되기 전에 pull하는 작업이 많아지면 트래픽이 많이 발생할 수 있다.

트래픽이 많이 발생하는 사이트에 적합하다.
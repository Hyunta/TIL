# Redis (Remote Dictionary Server)

Redis는 원격에 위치하고 프로세스로 존재하는 메모리 기반의 Key-Value 구조 데이터 관리 Server 시스템입니다.

Java의 HashMap, Python의 Dictionary가 대표적인 key-value 자료구조형입니다. 관계형 데이터가 아니기 때문에 NoSQL로 분류할 수도 있습니다.

또한 In-Memory 솔루션으로 분류하기도 하는데 내부에서 다양한 자료 구조를 지원하여 DB, Cache ,Queue 등의 용도로 사용할 수 있습니다.

디스크에 데이터를 쓰지 않고 메모리에서 처리하기 때문에 작업 속도가 빠릅니다.



## 특징

1. NoSQL로 분류되고 In-Memory 기반의 Key-Value 구조를 가진 데이터 관리 시스템
2. 메모리 기반이라 모든 데이터들을 저장하고 조회하는데 빠르다.
3. 상황에 따라 DB 혹은 Cache로 사용할 수 있다.
4. Remote Data Storage로 여러 서버에서 같은 데이터를 공유하고 싶을 때 사용할 수 있다.
5. 다양한 자료 구조를 지원한다 (Strings, Set, Sorted-Set, Hashes, List)
6. 샤딩을 지원한다.
7. 메모리 기반이지만 영속적인 데이터 보존이 가능하다
8. 스냅샷 기능을 제공하여 메모리 내용을 .rdb 파일로 저장하여 해당 시점으로 복구할 수 있다.
9. 데이터 부정합 방지를 위해 Atomic 함수를 제공한다(`SETNX`, `INCR`, `DECR`)
10. Redis는 기본적으로 싱글 스레드로 수행된다.



# 용도



## 1. 캐시

디스크의 정보를 미리 메모리에 올려놓으면 빠르게 응답할 수 있다.



### 캐시 구조 패턴

1. Look aside Cache

   항상 Cache를 먼저 조회한다.

   - 값이 있으면 반환한다.
   - 값이 없으면 DB를 조회해서 반환하고 캐시에 저장한다.



2. Write Back 패턴

   항상 Cache에 저장을 한다.

   일정 주기로 DB에 배치 처리를 한다.



## 2. 세션 스토어

로그인한 사용자가 같은 서버로 요청을 보낼 수 있도록 세션 스토리지로 사용한다.



## 비교군

Redis는 Memcached와 비슷한 역할을 하는데 몇가지 차이점이 있다.

그 중 자료구조 사용성에 있어서 Strings와 Integer만 사용할 수 있는 MemCached에 비해서 Redis는 선택지가 다양하다

읽기 성능은 Redis가 뛰어나지만, 쓰기 성능은 Memcahed가 더 좋다고 한다.



## 주의할 점

Redis는 싱글 쓰레드 기반으로 돌아간다.

따라서 긴 처러시간을 요하는 명령어를 조심해야한다.

`keys`, `flush`, `getall` 은 각각 O(n)으로 쓰지 않는 것이 좋다.

대신 scan을 쓰면 각 버킷을 한턴에 하나씩 순회합니다. 따라서 한번에 작업을 오래 붙잡고 있지 않는다.



